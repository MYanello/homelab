prometheus-server metrics {
  bind "0.0.0.0:8181"
  persist-path "/opt/iocaine/share/data/metrics.json"
  persist-interval "1h"
  labels = ["Host", "UserAgentGroup", "Verdict"]
  agent_group {
    agent = "(?i:ClaudeBot)"
    group = "ClaudeBot"
  }
  agent_group {
    agent = "(?i:AmazonBot)"
    group = "Amazon"
  }
  agent_group {
    agent = "(?i:GPTBot|ChatGPT)"
    group = "GPTBot"
  }
  agent_group {
    agent = "."
    group = "Other"
  }
}

http-server default {
  bind "0.0.0.0:8080"
  use metrics=metrics

  sources {
    markov = [
      "/opt/iocaine/share/data/1984.txt",
      "/opt/iocaine/share/data/brave-new-world.txt"
    ]
    words = "/opt/iocaine/share/data/words.txt"
  }
}

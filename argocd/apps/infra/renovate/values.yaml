renovate:
  mendRnvAcceptTos: y
  mendRnvPlatform: github
  mendRnvEndPoint: https://api.github.com/
  existingSecret: renovate-secrets
  mendRnvCronJobSchedulerAll: "*/2 * * * *"
  extraEnvVars:
    - name: LOG_LEVEL
      value: info
  config: |
    module.exports = {
      "extends": [
        "config:best-practices",
        "mergeConfidence:all-badges",
        "default:automergeDigest",
        "default:pinDigestsDisabled"
      ],
      "dependencyDashboard": true,
      "major": {
        "dependencyDashboardApproval": true,
      },
      "dependencyDashboardOSVVulnerabilitySummary": "all",
      "osvVulnerabilityAlerts": true,
      "vulnerabilityAlerts": {
        "enabled": true,
        "vulnerabilityFixStrategy": "lowest",
      },
      "argocd": {
        "fileMatch": ["argocd/.+\\.yaml$"],
      },
      "kubernetes": {
        "fileMatch": ["deploy\.yaml$"],
      },
      "packageRules": [
        {
          "matchDatasources": ["docker", "kustomize", "kubernetes"],
          "matchPackageNames": ["/.*pipeline.*resolvers.*/"],
          "groupName": "Tekton"
        },
        {
          "matchDatasources": ["docker", "kustomize", "kubernetes"],
          "matchPackageNames": ["/.*tektoncd\/pipeline\/cmd\/webhook.*/"],
          "overridePackageName": "ghcr.io/tektoncd/pipeline/webhook-d4749e605405422fd87700164e31b2d1",
          "groupName": "Tekton"
        },
        {
          "matchDatasources": ["docker", "kustomize", "kubernetes"],
          "matchPackageNames": ["/.*tektoncd\/pipeline\/cmd\/controller.*/"],
          "overridePackageName": "ghcr.io/tektoncd/pipeline/controller-10a3e32792f33651396d02b6855a6e36",
          "groupName": "Tekton"
        },
        {
          "matchDatasources": ["docker", "kustomize", "kubernetes"],
          "matchPackageNames": ["/.*tektoncd\/pipeline\/cmd\/events.*/"],
          "overridePackageName": "ghcr.io/tektoncd/pipeline/events-a9042f7efb0cbade2a868a1ee5ddd52c",
          "groupName": "Tekton"
        }
      ]
    }

cacheInMemory:
  enabled: true

affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
        - matchExpressions:
            - key: beta.kubernetes.io/arch
              operator: In
              values:
                - amd64

apiVersion: apps/v1
kind: Deployment
metadata:
  name: orgchart
  namespace: default
  labels:
    app: orgchart
spec:
   selector:
      matchLabels:
        app: orgchart
   replicas: 1
   template:
      metadata:
        annotations:
          vault.hashicorp.com/agent-inject: 'true'
          vault.hashicorp.com/role: 'internal-app'
          vault.hashicorp.com/agent-inject-secret-database-config.txt: 'secret/database/config'
          vault.hashicorp.com/tls-secret: vault-tls-secret 
          vault.hashicorp.com/ca-cert: /vault/tls/ca.crt
        labels:
          app: orgchart
      spec:
        serviceAccountName: internal-app
        containers:
          - name: orgchart
            image: jweissig/app:0.0.1
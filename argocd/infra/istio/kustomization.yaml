apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  #- https://github.com/kubernetes-sigs/gateway-api/releases/download/v1.2.1/standard-install.yaml
  - app.yaml
  # - resources/authPol.yaml
  # - resources/cert.yaml
  # - resources/envoyFilter.yaml
  # - resources/external-vs.yaml
  # - resources/hps.yaml
  # - resources/httpRoute.yaml
  # - resources/ingress-class.yaml
  # - resources/istio-gw.yaml
  # - resources/pdb.yaml
  # - resources/serviceEntry.yaml

patches:
  - target:
      kind: Deployment
    patch: |-
      - op: replace
        path: /spec/replicas
        value: 0
  - target:
      kind: StatefulSet
    patch: |-
      - op: replace
        path: /spec/replicas
        value: 0
  - target:
      kind: DaemonSet
    patch: |-
      - op: replace
        path: /spec/replicas
        value: 0

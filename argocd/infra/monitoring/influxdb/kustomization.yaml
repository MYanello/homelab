apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

generators:
  - secret-generator.yaml

helmCharts:
  - name: influxdb
    repo: https://helm.influxdata.com/
    version: "4.12.5"
    releaseName: influxdb
    namespace: monitoring
    valuesInline: 
      service: 
        type: LoadBalancer
        loadBalancerIP: 10.10.8.0
      persistence:
        storageClassName: longhorn
      setDefaultUser:
        enabled: true
        existingSecret: influxdb-secrets
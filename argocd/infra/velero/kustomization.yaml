apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# resources:
#   - https://raw.githubusercontent.com/vmware-tanzu/velero/v1.17.0/config/crd/v1/bases/velero.io_volumesnapshotlocations.yaml
#   - https://raw.githubusercontent.com/vmware-tanzu/velero/v1.17.0/config/crd/v1/bases/velero.io_backupstoragelocations.yaml
#   - https://raw.githubusercontent.com/vmware-tanzu/velero/v1.17.0/config/crd/v1/bases/velero.io_backups.yaml
#   - https://raw.githubusercontent.com/vmware-tanzu/velero/v1.17.0/config/crd/v1/bases/velero.io_restores.yaml
#   - https://raw.githubusercontent.com/vmware-tanzu/velero/v1.17.0/config/crd/v1/bases/velero.io_schedules.yaml
#   - https://raw.githubusercontent.com/vmware-tanzu/velero/v1.17.0/config/crd/v1/bases/velero.io_deletebackuprequests.yaml
#   - https://raw.githubusercontent.com/vmware-tanzu/velero/v1.17.0/config/crd/v1/bases/velero.io_downloadrequests.yaml
#   - https://raw.githubusercontent.com/vmware-tanzu/velero/v1.17.0/config/crd/v1/bases/velero.io_podvolumebackups.yaml
#   - https://raw.githubusercontent.com/vmware-tanzu/velero/v1.17.0/config/crd/v1/bases/velero.io_podvolumerestores.yaml
#   - https://raw.githubusercontent.com/vmware-tanzu/velero/v1.17.0/config/crd/v1/bases/velero.io_resticrepositories.yaml
#   - https://raw.githubusercontent.com/vmware-tanzu/velero/v1.17.0/config/crd/v1/bases/velero.io_serverstatusrequests.yaml

generators:
  - ./secret-generator.yaml

helmCharts:
  - name: velero
    releaseName: velero
    namespace: velero
    repo: https://vmware-tanzu.github.io/helm-charts
    version: 11.0.0
    valuesInline:
      configuration:
        backupStorageLocation:
          - name: backblaze
            provider: aws
            bucket: myanello-velero
            default: true
            credential:
              name: backblaze-secrets
              key: applicationKey
            config:
              region: us-west-004
              s3Url: s3.us-west-004.backblazeb2.com
